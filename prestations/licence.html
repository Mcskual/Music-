<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contrat de licence instrumentale</title>
  <style>
    :root {
      --bg:#0f172a;
      --card:#111827;
      --muted:#6b7280;
      --accent:#f97316;
      --accent2:#a855f7;
      --border:#1e293b;
      --text:#e5e7eb;
      --text2:#cbd5e1;
      --shadow:0 10px 30px rgba(0,0,0,.25);
      --bg-gradient:
        radial-gradient(circle at 0% 0%, rgba(249,115,22,.18), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(168,85,247,.16), transparent 55%),
        linear-gradient(120deg,#0c0e1a,#0b1020 40%,#0c1324 70%,#0a0d1a);
    }

    [data-theme="light"] {
      --bg:#f8fafc;
      --card:#ffffff;
      --text:#0f172a;
      --text2:#4b5563;
      --border:#e5e7eb;
      --muted:#6b7280;
      --shadow:0 16px 40px rgba(236,72,153,.12);
      --bg-gradient:
        radial-gradient(circle at 0% 0%, rgba(249,115,22,.12), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(168,85,247,.10), transparent 55%),
        linear-gradient(120deg,#fdf2e9,#f8fafc 42%,#f4f1ff 70%,#f8fafc);
    }

    *{box-sizing:border-box}

    body {
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background: var(--bg-gradient);
      color:var(--text);
      margin:0;
    }

    .container { max-width:1200px; margin:36px auto; padding:0 16px; }

    .top-nav{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:14px 18px;
      min-height:72px;
      background:linear-gradient(125deg,rgba(249,115,22,.18),rgba(168,85,247,.16)),linear-gradient(180deg,rgba(15,23,42,.9),rgba(15,23,42,.78));
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:0 18px 44px rgba(15,23,42,.35);
      margin-bottom:16px;
      flex-wrap:nowrap;
      overflow:hidden;
      backdrop-filter:blur(10px);
    }
    .top-nav::after{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(90deg,rgba(255,255,255,.05),transparent 45%,rgba(255,255,255,.08));
      pointer-events:none;
    }
    .nav-brand{
      display:flex;
      flex-direction:column;
      gap:2px;
      font-weight:800;
      letter-spacing:.03em;
    }
    .nav-brand .brand-title{ font-size:12px; text-transform:uppercase; letter-spacing:.14em; }
    .nav-brand .brand-sub{ font-size:11px; color:var(--muted); letter-spacing:.05em; }
    .nav-left{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:0;
      flex-shrink:0;
      height:100%;
      position:relative;
      z-index:1;
    }
    .nav-links{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; justify-content:center; flex:1; min-width:0; padding:6px 8px; background:rgba(255,255,255,.02); border:1px solid var(--border); border-radius:14px; box-shadow:inset 0 1px 0 rgba(255,255,255,.04); position:relative; z-index:1; }
    [data-theme="light"] .nav-links{ background:rgba(15,23,42,.02); }
    .nav-link{
      position:relative;
      color:var(--text2);
      text-decoration:none;
      padding:8px 12px;
      border-radius:12px;
      border:1px solid transparent;
      background:rgba(15,23,42,.6);
      font-size:13px;
      font-weight:600;
      letter-spacing:.01em;
      transition:.18s background,.18s border-color,.18s color;
    }
    [data-theme="light"] .nav-link{
      background:#f8fafc;
    }
    .nav-link:hover{
      border-color:var(--accent);
      color:#fff;
      background:linear-gradient(135deg,rgba(249,115,22,.18),rgba(168,85,247,.16));
      transform:translateY(-1px);
    }
    [data-theme="light"] .nav-link:hover{ color:var(--accent); }
    .nav-link::after{
      content:"";
      position:absolute;
      left:12px;
      right:12px;
      bottom:6px;
      height:3px;
      border-radius:999px;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      opacity:0;
      transform:translateY(6px);
      transition:.2s ease;
    }
    .nav-link:hover::after{ opacity:1; transform:translateY(0); }
    .nav-link.active{
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      color:#fff;
      border-color:transparent;
      box-shadow:0 12px 26px rgba(37,99,235,.45);
      transform:translateY(-1px);
    }
    .nav-link.active::after{ opacity:1; transform:translateY(0); background:linear-gradient(135deg,rgba(255,255,255,.9),rgba(255,255,255,.6)); }

    header.app {
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:8px;
      flex-wrap:wrap;
    }

    .logo-wrap{
      background:var(--card);
      border-radius:18px;
      padding:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:var(--shadow);
      border:1px solid var(--border);
      text-decoration:none;
      color:inherit;
    }
    .logo-wrap img{
      width:220px;
      height:auto;
      display:block;
      border-radius:14px;
      transition:transform .2s ease, opacity .2s ease;
    }
    .logo-compact{
      padding:6px 10px;
      border-radius:14px;
    }
    .logo-compact img{ width:160px; }

    h1 { font-size:clamp(26px,4vw,40px); margin:0; }
    h2 { margin:0 0 12px; font-size:18px; }
    .sub{ color:var(--text2); margin-bottom:16px; font-size:14px;}

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow:var(--shadow);
      padding:16px;
      margin-top:16px;
    }

    .hero-card{
      position:relative;
      overflow:hidden;
      background:linear-gradient(160deg, rgba(249,115,22,.07), rgba(168,85,247,.08)), var(--card);
      border:1px solid rgba(168,85,247,.35);
      box-shadow:0 16px 42px rgba(0,0,0,.32);
      isolation:isolate;
    }
    .hero-card::after{
      content:"";
      position:absolute;
      inset:-25% auto auto 55%;
      width:360px;
      height:360px;
      background:radial-gradient(circle at center, rgba(249,115,22,.16), transparent 60%);
      filter:blur(18px);
      opacity:.8;
      z-index:-1;
      pointer-events:none;
    }

    .grid{ display:grid; gap:16px; }
    @media(max-width:960px){
      header.app{ justify-content:flex-start; }
    }

    label{
      display:block;
      font-size:13px;
      margin-bottom:6px;
      color:var(--text2);
    }

    input[type="text"],
    input[type="date"],
    input[type="number"],
    select,
    textarea{
      width:100%;
      padding:10px 11px;
      border-radius:12px;
      border:1px solid var(--border);
      background:var(--card);
      color:var(--text);
      font-size:14px;
      outline:none;
      transition:.16s border-color,.16s box-shadow,.16s background,.16s transform;
    }
    input::placeholder,
    textarea::placeholder{ color:#6b7280; font-size:13px;}
    input:focus,
    select:focus,
    textarea:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(37,99,235,.35);
      background:var(--card);
      transform:translateY(-1px);
    }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:8px 14px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:13px;
      font-weight:600;
      letter-spacing:.01em;
      background:#111827;
      color:#e5e7eb;
      border:1px solid #1f2937;
      transition:.15s background,.15s transform,.15s box-shadow,.15s border-color,.15s opacity;
    }
    .btn-primary{
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      border-color:transparent;
      color:#fff;
      box-shadow:0 10px 18px rgba(37,99,235,.45);
    }
    .btn-primary:hover{
      transform:translateY(-1px);
      box-shadow:0 14px 26px rgba(37,99,235,.6);
      opacity:0.97;
    }
    .btn-outline{
      background:transparent;
      color:var(--text2);
      border-color:#1f2937;
    }
    [data-theme="light"] .btn-outline{
      border-color:#e5e7eb;
    }
    .btn-outline:hover{ background:rgba(255,255,255,.06); }

    .hint{ color:var(--text2); font-size:13px; margin-top:-4px; }
    .small{ color:var(--text2); font-size:12px; }

    .row{ display:flex; gap:8px; align-items:center; }
    .pill{ display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); font-size:12px; color:var(--text2); }

    .switch{
      position:relative;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:11px;
      color:var(--text2);
      cursor:pointer;
      user-select:none;
    }
    .switch input{ display:none; }
    .switch span.slider{
      width:34px;
      height:18px;
      border-radius:999px;
      background:#020617;
      border:1px solid #1f2937;
      position:relative;
      transition:.16s background,.16s border-color;
    }
    [data-theme="light"] .switch span.slider{
      background:#e5e7eb;
      border-color:#d1d5db;
    }
    .switch span.slider::before{
      content:"";
      position:absolute;
      top:1px;
      left:1px;
      width:14px;
      height:14px;
      border-radius:999px;
      background:#e5e7eb;
      transition:.16s transform,.16s background;
      box-shadow:0 1px 3px rgba(15,23,42,.5);
    }
    [data-theme="light"] .switch span.slider::before{ background:#ffffff; }
    .switch input:checked + .slider{
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      border-color:transparent;
    }
    .switch input:checked + .slider::before{ transform:translateX(14px); }
    .theme-toggle{
      display:flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      background:rgba(15,23,42,.6);
      border:1px solid var(--border);
      border-radius:12px;
      box-shadow:var(--shadow);
      flex-shrink:0;
    }
    [data-theme="light"] .theme-toggle{ background:#f8fafc; }
    .theme-icon{
      font-size:14px;
      line-height:1;
      filter:drop-shadow(0 2px 6px rgba(0,0,0,.25));
    }
  </style>
</head>
<body>
  <div class="container">
    <nav class="top-nav" aria-label="Navigation principale">
      <div class="nav-left">
        <a class="logo-wrap logo-compact" href="index.html" aria-label="Revenir aux prestations">
          <img
            src="szd_logo_white.png"
            data-dark-src="szd_logo_white.png"
            data-light-src="szd_logo_black.png"
            alt="Logo">
        </a>
      </div>
      <div class="nav-links">
        <a class="nav-link" href="index.html">Prestations</a>
        <a class="nav-link" href="facturation.html">Facturation</a>
        <a class="nav-link" href="rdv.html">Ajouter un RDV</a>
        <a class="nav-link active" href="licence.html">Contrat instrumentale</a>
        <a class="nav-link" href="famille.html">Famille</a>
      </div>

      <div class="theme-toggle" role="group" aria-label="Changer de th√®me">
        <span class="theme-icon" aria-hidden="true">üåô</span>
        <label class="switch" aria-label="Basculer le th√®me nuit/jour">
          <input type="checkbox" id="themeToggle">
          <span class="slider"></span>
        </label>
      </div>
    </nav>
    <header class="app">
      <div>
        <h1>Contrat de licence d'instrumentale</h1>
        <div class="row" style="margin:4px 0 2px;">
          <span class="pill">Version 1.0</span>
          <span class="pill">Export .doc</span>
        </div>
        <p class="sub">
          Remplis les infos, choisis la fonction (Artiste / Manager / Autre), puis clique sur ¬´ G√©n√©rer le contrat instrumental (.doc) ¬ª.
        </p>
      </div>

      <div style="margin-left:auto; visibility:hidden; width:1px; height:1px; overflow:hidden;"></div>
    </header>

    <section class="card hero-card" id="bloc-contrat-artiste" style="margin:24px 0;">
      <h2>Contrat de licence d'instrumentale</h2>
      <p class="hint">
        Remplis les infos, choisis la fonction (Artiste / Manager / Autre), puis clique sur ¬´ G√©n√©rer le contrat instrumental (.doc) ¬ª.
      </p>

      <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;">

        <div>
          <label for="ca-nom-artiste">Nom / pr√©nom de la personne (obligatoire)</label>
          <input type="text" id="ca-nom-artiste" placeholder="Nom complet de la personne">
        </div>

        <div>
          <label for="ca-fonction">Fonction (obligatoire)</label>
          <select id="ca-fonction">
            <option value="Artiste" selected>Artiste</option>
            <option value="Manager">Manager / Responsable d'artiste</option>
            <option value="Autre">Autre</option>
          </select>
        </div>

        <div id="ca-wrapper-nom-scene">
          <label for="ca-nom-scene">Nom de sc√®ne (si Artiste)</label>
          <input type="text" id="ca-nom-scene" placeholder="Ex : HAMADA">
        </div>

        <div id="ca-wrapper-artiste-represente" style="display:none;">
          <label for="ca-artiste-represente">Artiste repr√©sent√© (obligatoire si Manager)</label>
          <input type="text" id="ca-artiste-represente" placeholder="Nom de l'artiste repr√©sent√©">
        </div>

        <div id="ca-wrapper-fonction-detail" style="display:none;">
          <label for="ca-fonction-detaillee">Pr√©ciser la fonction (obligatoire si Autre)</label>
          <input type="text" id="ca-fonction-detaillee" placeholder="Ex : Producteur ex√©cutif">
        </div>

        <div>
          <label for="ca-adresse-artiste">Adresse</label>
          <input type="text" id="ca-adresse-artiste" placeholder="Adresse compl√®te">
        </div>

        <div>
          <label for="ca-cp-ville-artiste">Code postal / Ville</label>
          <input type="text" id="ca-cp-ville-artiste" placeholder="Ex : 71170 Chauffailles">
        </div>

        <div>
          <label for="ca-date-contrat">Date du contrat</label>
          <input type="date" id="ca-date-contrat">
        </div>

        <div>
          <label for="ca-lieu-signature">Lieu de signature</label>
          <input type="text" id="ca-lieu-signature" placeholder="Ex : Montlouis-sur-Loire">
        </div>

        <div>
          <label for="ca-titre-oeuvre">Titre de l'instrumentale</label>
          <input type="text" id="ca-titre-oeuvre" placeholder="Titre de la prod">
        </div>

        <div>
          <label for="ca-type-licence">Type de licence</label>
          <select id="ca-type-licence">
            <option value="non exclusive" selected>Non exclusive</option>
            <option value="exclusive">Exclusive</option>
          </select>
        </div>

        <div>
          <label for="ca-montant">Montant pay√© (‚Ç¨)</label>
          <input type="number" id="ca-montant" placeholder="Ex : 100" min="0">
        </div>
      </div>

      <div class="toolbar" style="margin-top:12px;">
        <button type="button" class="btn btn-primary" id="ca-generate">
          G√©n√©rer le contrat instrumental (.doc)
        </button>
      </div>

      <p class="small">
        Le fichier g√©n√©r√© sera un .doc modifiable (Word / LibreOffice), que tu pourras ensuite exporter en PDF pour signature.
      </p>
    </section>
  </div>

  <textarea id="template-contrat-artiste" style="display:none; white-space:pre-wrap;">

[[LIEU_SIGNATURE]], le [[DATE_CONTRAT]]

[[NOM_PERSONNE]]
[[ADRESSE_ARTISTE]]
[[CP_VILLE_ARTISTE]]

Objet : Contrat de licence d'instrumentale ([[TYPE_LICENCE_MAJ]])

Madame, Monsieur,
[[APPEL_CLIENT]]

Par le pr√©sent courrier, il est convenu ce qui suit entre :

[[NOM_PRODUCTEUR]] (ci-apr√®s ¬´ le Producteur ¬ª ou ¬´ le Beatmaker ¬ª),

et

[[BLOC_CLIENT]]

--------------------------------------------------
ARTICLE 1 ‚Äì OBJET
--------------------------------------------------
Le pr√©sent contrat a pour objet de d√©finir les conditions dans lesquelles le Producteur conc√®de √† l'Artiste une licence [[TYPE_LICENCE]] d'utilisation de l'instrumentale intitul√©e ¬´ [[TITRE_OEUVRE]] ¬ª (ci-apr√®s ¬´ l'Instrumentale ¬ª).

--------------------------------------------------
ARTICLE 2 ‚Äì PRIX, ACOMPTE, MODALIT√âS DE PAIEMENT ET RETOUCHES
--------------------------------------------------
En contrepartie de la Licence conc√©d√©e et du travail de production r√©alis√©, l‚ÄôArtiste s‚Äôengage √† verser au Producteur la somme de :

MONTANT TOTAL : [[MONTANT]] ‚Ç¨ TTC

ACOMPTE :
Un acompte obligatoire de trente pour cent (30%) du montant total doit √™tre r√©gl√© pour permettre au Producteur de d√©marrer la production.
Aucun travail (composition, arrangement, mix, structure ou tout √©l√©ment de production) ne sera initi√© tant que cet acompte n‚Äôaura pas √©t√© re√ßu.

SOLDE :
Le solde restant (70%) doit √™tre r√©gl√© dans un d√©lai maximum de trente (30) jours √† compter de la livraison de la premi√®re version de l‚ÄôInstrumentale ou de l‚Äô√©mission de la demande de paiement correspondante.
Le paiement complet est indispensable pour valider d√©finitivement la Licence.
Aucun fichier final (export, stems, projet, ou √©l√©ment d√©finitif) ne sera livr√© tant que le r√®glement total n‚Äôaura pas √©t√© re√ßu.

MODES DE PAIEMENT ACCEPT√âS :
- Virement bancaire (coordonn√©es ci-dessous)
- PayPal ou Lydia (adresse communiqu√©e sur demande)
- Esp√®ces (uniquement en main propre)

Coordonn√©es bancaires du Producteur :
Nom : Armel Abdoulatif ALI
IBAN : FR80 2043 3026 26N2 6178 8757 833
BIC : NTSBFRM1XXX

RETOUCHES :
L‚ÄôArtiste b√©n√©ficie de deux (2) retouches gratuites, √† condition qu‚Äôelles soient demand√©es dans un d√©lai maximum de quinze (15) jours apr√®s la livraison initiale.
Une retouche correspond √† une modification raisonnable n‚Äôalt√©rant pas la structure ou l‚Äôidentit√© de l‚Äô≈ìuvre.

RETOUCHES SUPPL√âMENTAIRES :
Toute retouche suppl√©mentaire au-del√† des deux incluses sera factur√©e dix euros (10 ‚Ç¨) par retouche.
Les retouches suppl√©mentaires doivent obligatoirement √™tre r√©gl√©es avant le d√©but de leur r√©alisation.

PROTECTIONS :
Le Producteur se r√©serve le droit de refuser toute demande excessive ou abusive.
En cas de non-paiement dans les d√©lais impartis (y compris l'acompte ou le solde), la prestation peut √™tre suspendue ou annul√©e sans pr√©avis.
--------------------------------------------------
ARTICLE 3 ‚Äì NATURE DE LA LICENCE
--------------------------------------------------
3.1 Licence non exclusive
Lorsque la licence choisie est NON EXCLUSIVE, l‚ÄôArtiste peut exploiter librement l‚ÄôInstrumentale, mais le Producteur conserve le droit de vendre la m√™me Instrumentale √† d‚Äôautres artistes.

3.2 Licence exclusive
Lorsque la licence choisie est EXCLUSIVE, l‚ÄôArtiste obtient un droit exclusif d‚Äôexploitation de l'Instrumentale √† compter de la date du contrat.
Le Producteur ne pourra plus vendre cette Instrumentale √† un autre artiste apr√®s cette date.

Le type de licence choisi est : [[TYPE_LICENCE_MAJ]].

--------------------------------------------------
ARTICLE 4 ‚Äì TERRITOIRE ET DUR√âE
--------------------------------------------------
La licence est accord√©e pour le monde entier et pour toute la dur√©e l√©gale de protection de l'≈ìuvre au titre du droit d‚Äôauteur.

--------------------------------------------------
ARTICLE 5 ‚Äì DROITS ACCORD√âS
--------------------------------------------------
L‚ÄôArtiste est autoris√© √† :
- enregistrer un ou plusieurs morceaux avec l‚ÄôInstrumentale ;
- diffuser ces morceaux sur les plateformes de streaming (Spotify, Apple Music, Deezer, etc.) ;
- diffuser ces morceaux sur YouTube, TikTok, r√©seaux sociaux, radios, TV ;
- utiliser ces morceaux dans des clips, concerts, showcases, √©v√©nements promotionnels.

L‚ÄôArtiste n‚Äôest pas autoris√© √† :
- revendre l‚ÄôInstrumentale seule ;
- mettre l‚ÄôInstrumentale seule √† disposition en pack, banque de sons, kit de production ;
- revendiquer la qualit√© de producteur ou de beatmaker de l‚ÄôInstrumentale.

--------------------------------------------------
ARTICLE 6 ‚Äì MENTION OBLIGATOIRE DU PRODUCTEUR
--------------------------------------------------
L‚ÄôArtiste s'engage √† cr√©diter le Producteur de mani√®re claire et visible sur toutes les exploitations du morceau utilisant l‚ÄôInstrumentale, notamment, √† titre d‚Äôexemple :

¬´ Prod. par [[NOM_PRODUCTEUR]] ¬ª

Cette mention devra appara√Ætre, dans la mesure du possible :
- dans les m√©tadonn√©es des plateformes (Spotify, Apple Music, Deezer, etc.) ;
- dans les descriptions des vid√©os YouTube ;
- sur la pochette ou le visuel du single / projet ;
- sur les visuels promotionnels et publications r√©seaux sociaux.

--------------------------------------------------
ARTICLE 7 ‚Äì PROPRI√âT√â INTELLECTUELLE
--------------------------------------------------
Le Producteur reste, en toutes circonstances, seul titulaire des droits d‚Äôauteur sur l‚ÄôInstrumentale.

La licence conc√©d√©e √† l‚ÄôArtiste n‚Äôemporte aucun transfert de propri√©t√©, mais uniquement une autorisation d‚Äôutilisation dans le cadre d√©fini par le pr√©sent contrat.

--------------------------------------------------
ARTICLE 8 ‚Äì GARANTIE D‚ÄôUTILISATION
--------------------------------------------------
L‚ÄôArtiste s‚Äôengage √† ne pas utiliser l‚ÄôInstrumentale ni les morceaux qui en d√©coulent dans des contenus :
- diffamatoires,
- haineux,
- discriminatoires,
- contraires aux lois et r√®glements fran√ßais.

--------------------------------------------------
ARTICLE 9 ‚Äì R√âSILIATION
--------------------------------------------------
En cas de non-respect grave des obligations du pr√©sent contrat (par exemple : diffusion de l‚ÄôInstrumentale seule, absence syst√©matique de cr√©dit du Producteur, cession non autoris√©e de la licence), le Producteur pourra proc√©der √† la r√©siliation du contrat apr√®s mise en demeure √©crite rest√©e sans effet pendant un d√©lai de quinze (15) jours.

La r√©siliation ne remet pas en cause les sommes d√©j√† vers√©es au titre de la licence.

--------------------------------------------------
ARTICLE 10 ‚Äì DROIT APPLICABLE ET JURIDICTION
--------------------------------------------------
Le pr√©sent contrat est r√©gi par le droit fran√ßais.

En cas de litige relatif √† son interpr√©tation ou √† son ex√©cution, et √† d√©faut de r√©solution amiable, les Parties conviennent de soumettre le diff√©rend aux tribunaux comp√©tents du ressort du domicile du Producteur.

Fait √† [[LIEU_SIGNATURE]], le [[DATE_CONTRAT]].

Le Producteur
[[NOM_PRODUCTEUR]]
Signature :

L'Artiste
[[NOM_ARTISTE]]
Alias [[NOM_SCENE]]
Signature :

</textarea>

  <script>
    function updateThemeLogos(theme){
      const mode = theme === "light" ? "light" : "dark";

      document.querySelectorAll('[data-light-src][data-dark-src]').forEach((img) => {
        const target = mode === "light" ? img.dataset.lightSrc : img.dataset.darkSrc;
        if (target) {
          img.setAttribute("src", target);
        }
      });
    }
  </script>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const btn = document.getElementById('ca-generate');
    const tplEl = document.getElementById('template-contrat-artiste');
    if (!btn || !tplEl) return;

    const fFonction = document.getElementById('ca-fonction');
    const wrapNomScene = document.getElementById('ca-wrapper-nom-scene');
    const wrapArtisteRep = document.getElementById('ca-wrapper-artiste-represente');
    const wrapFonctionDetail = document.getElementById('ca-wrapper-fonction-detail');

    function g(id) {
      const el = document.getElementById(id);
      return el ? el.value.trim() : "";
    }

    function updateFonctionUI(){
      const f = g('ca-fonction') || "Artiste";
      if (f === "Artiste") {
        if (wrapNomScene) wrapNomScene.style.display = "";
        if (wrapArtisteRep) wrapArtisteRep.style.display = "none";
        if (wrapFonctionDetail) wrapFonctionDetail.style.display = "none";
      } else if (f === "Manager") {
        if (wrapNomScene) wrapNomScene.style.display = "none";
        if (wrapArtisteRep) wrapArtisteRep.style.display = "";
        if (wrapFonctionDetail) wrapFonctionDetail.style.display = "none";
      } else { // Autre
        if (wrapNomScene) wrapNomScene.style.display = "none";
        if (wrapArtisteRep) wrapArtisteRep.style.display = "none";
        if (wrapFonctionDetail) wrapFonctionDetail.style.display = "";
      }
    }

    if (fFonction) {
      fFonction.addEventListener('change', updateFonctionUI);
      updateFonctionUI();
    }

    btn.addEventListener('click', function () {
      let tpl = tplEl.value;
      if (!tpl || !tpl.trim()) {
        alert('Le mod√®le de contrat est vide. V√©rifie le bloc <textarea id="template-contrat-artiste"> dans le code.');
        return;
      }

      const nomPersonne = g('ca-nom-artiste');
      const fonction = g('ca-fonction') || "Artiste";
      const artisteRep = g('ca-artiste-represente');
      const fonctionDetaillee = g('ca-fonction-detaillee');

      if (!nomPersonne) {
        alert("Le nom / pr√©nom de la personne est obligatoire.");
        return;
      }

      if (fonction === "Manager" && !artisteRep) {
        alert("Merci de pr√©ciser l'artiste repr√©sent√© (obligatoire pour un manager).");
        return;
      }

      if (fonction === "Autre" && !fonctionDetaillee) {
        alert("Merci de pr√©ciser la fonction (obligatoire si 'Autre').");
        return;
      }

      let nomArtisteContrat;
      if (fonction === "Artiste") {
        nomArtisteContrat = nomPersonne;
      } else if (fonction === "Manager") {
        nomArtisteContrat = artisteRep || nomPersonne;
      } else {
        nomArtisteContrat = nomPersonne;
      }

      let nomScene = "";
      if (fonction === "Artiste") {
        nomScene = g('ca-nom-scene') || nomArtisteContrat;
      } else if (fonction === "Manager") {
        nomScene = artisteRep || nomArtisteContrat;
      } else {
        nomScene = nomArtisteContrat;
      }

      let appelClient;
      if (fonction === "Artiste") {
        appelClient = `Cher/Ch√®re ${nomArtisteContrat} (alias ${nomScene}),`;
      } else if (fonction === "Manager") {
        appelClient = `Cher/Ch√®re ${nomPersonne}, manager de ${nomArtisteContrat},`;
      } else {
        appelClient = `Cher/Ch√®re ${nomPersonne},`;
      }

      let blocClient;
      if (fonction === "Artiste") {
        blocClient = `${nomArtisteContrat}, √©galement connu sous le nom de sc√®ne ${nomScene}, demeurant ${g('ca-adresse-artiste')} ${g('ca-cp-ville-artiste')} (ci-apr√®s ¬´ l'Artiste ¬ª).`;
      } else if (fonction === "Manager") {
        blocClient = `${nomPersonne}, agissant en qualit√© de manager de ${nomArtisteContrat}, demeurant ${g('ca-adresse-artiste')} ${g('ca-cp-ville-artiste')} (le manager, repr√©sentant l'Artiste).`;
      } else {
        blocClient = `${nomPersonne}, agissant en qualit√© de ${fonctionDetaillee}, demeurant ${g('ca-adresse-artiste')} ${g('ca-cp-ville-artiste')} (ci-apr√®s ¬´ le Client ¬ª).`;
      }

      const nomProducteur = "Armel ALI";

      tpl = tpl
        .replaceAll('[[NOM_PERSONNE]]', nomPersonne || nomArtisteContrat)
        .replaceAll('[[APPEL_CLIENT]]', appelClient)
        .replaceAll('[[BLOC_CLIENT]]', blocClient)
        .replaceAll('[[NOM_ARTISTE]]', nomArtisteContrat)
        .replaceAll('[[NOM_SCENE]]', nomScene || nomArtisteContrat)
        .replaceAll('[[ADRESSE_ARTISTE]]', g('ca-adresse-artiste'))
        .replaceAll('[[CP_VILLE_ARTISTE]]', g('ca-cp-ville-artiste'))
        .replaceAll('[[DATE_CONTRAT]]', g('ca-date-contrat'))
        .replaceAll('[[LIEU_SIGNATURE]]', g('ca-lieu-signature'))
        .replaceAll('[[TITRE_OEUVRE]]', g('ca-titre-oeuvre') || "Instrumentale")
        .replaceAll('[[TYPE_LICENCE]]', g('ca-type-licence') || "non exclusive")
        .replaceAll('[[TYPE_LICENCE_MAJ]]', (g('ca-type-licence') || "non exclusive").toUpperCase())
        .replaceAll('[[MONTANT]]', g('ca-montant') || "0")
        .replaceAll('[[NOM_PRODUCTEUR]]', nomProducteur);

      const blob = new Blob([tpl], { type: "application/msword" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      const safeName = (nomScene || nomArtisteContrat || "Artiste").replace(/\s+/g, "_");

      a.href = url;
      a.download = "Contrat_Licence_Instrumentale_" + safeName + ".doc";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });
  });
  </script>

  <script>
    (function(){
      const THEME_KEY = "szd_theme";
      const root = document.documentElement;

      function applyTheme(theme){
        if(theme === "light"){
          root.setAttribute("data-theme","light");
        }else{
          root.removeAttribute("data-theme");
        }

        const themeIcon = document.querySelector(".theme-icon");
        if (themeIcon) {
          themeIcon.textContent = theme === "light" ? "‚òÄÔ∏è" : "üåô";
        }

        if (typeof updateThemeLogos === "function") {
          updateThemeLogos(theme);
        }
      }

      document.addEventListener("DOMContentLoaded", function(){
        var toggle = document.getElementById("themeToggle");
        if(!toggle) return;

        var saved = null;
        try {
          saved = localStorage.getItem(THEME_KEY);
        } catch(e) {}

        if(saved === "light"){
          applyTheme("light");
          toggle.checked = false;
        } else {
          applyTheme("dark");
          toggle.checked = true;
        }

        toggle.addEventListener("change", function(){
          if(toggle.checked){
            applyTheme("dark");
            try { localStorage.setItem(THEME_KEY,"dark"); } catch(e) {}
          } else {
            applyTheme("light");
            try { localStorage.setItem(THEME_KEY,"light"); } catch(e) {}
          }
        });
      });
    })();
  </script>
</body>
</html>
