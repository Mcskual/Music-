<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ajouter un RDV — SZD Studio</title>
  <style>
    :root {
      --bg:#0f172a;
      --card:#111827;
      --muted:#6b7280;
      --accent:#2563eb;
      --accent2:#16a34a;
      --border:#1e293b;
      --text:#e5e7eb;
      --text2:#cbd5e1;
      --shadow:0 10px 30px rgba(0,0,0,.25);
      --bg-gradient:
        radial-gradient(circle at 0% 0%, rgba(59,130,246,.22), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(34,197,94,.16), transparent 55%),
        linear-gradient(120deg,#020617,#020617 40%,#020617 60%,#020617);
    }

    [data-theme="light"] {
      --bg:#f3f4f6;
      --card:#ffffff;
      --text:#0f172a;
      --text2:#4b5563;
      --border:#e5e7eb;
      --muted:#6b7280;
      --shadow:0 16px 40px rgba(15,23,42,.12);
      --bg-gradient:
        radial-gradient(circle at 0% 0%, rgba(59,130,246,.12), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(34,197,94,.10), transparent 55%),
        linear-gradient(120deg,#f9fafb,#f3f4f6 40%,#e5e7eb 60%,#f9fafb);
    }

    *{box-sizing:border-box}

    body {
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background: var(--bg-gradient);
      color:var(--text);
      margin:0;
    }

    .container { max-width:1200px; margin:36px auto; padding:0 16px; }

    .top-nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:linear-gradient(120deg,rgba(59,130,246,.14),rgba(34,197,94,.08)),var(--card);
      border:1px solid var(--border);
      border-radius:14px;
      padding:10px 14px;
      box-shadow:var(--shadow);
      margin-bottom:14px;
    }
    .nav-brand{
      font-weight:800;
      letter-spacing:.03em;
    }
    .nav-links{ display:flex; gap:8px; flex-wrap:wrap; }
    .nav-link{
      color:var(--text2);
      text-decoration:none;
      padding:8px 12px;
      border-radius:10px;
      border:1px solid var(--border);
      background:rgba(15,23,42,.6);
      font-size:13px;
      transition:.15s background,.15s border-color,.15s color;
    }
    [data-theme="light"] .nav-link{
      background:#f8fafc;
    }
    .nav-link:hover{ border-color:var(--accent); color:#fff; }
    [data-theme="light"] .nav-link:hover{ color:var(--accent); }
    .nav-link.active{
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      color:#fff;
      border-color:transparent;
      box-shadow:0 10px 22px rgba(37,99,235,.45);
    }

    header.app {
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:8px;
      flex-wrap:wrap;
    }

    .logo-wrap{
      background:var(--card);
      border-radius:18px;
      padding:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:var(--shadow);
      border:1px solid var(--border);
    }
    .logo-wrap img{
      width:220px;
      height:auto;
      display:block;
      border-radius:14px;
      transition:transform .2s ease, opacity .2s ease;
    }

    h1 { font-size:clamp(26px,4vw,40px); margin:0; }
    h2 { margin:0 0 12px; font-size:18px; }
    .sub{ color:var(--text2); margin-bottom:16px; font-size:14px;}

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow:var(--shadow);
      padding:16px;
      margin-top:16px;
    }

    .grid{ display:grid; gap:16px; }
    .grid-2{ grid-template-columns:1.15fr .85fr; }
    @media(max-width:960px){
      .grid-2{ grid-template-columns:1fr; }
      header.app{ justify-content:flex-start; }
    }

    label{
      display:block;
      font-size:13px;
      margin-bottom:6px;
      color:var(--text2);
    }

    input[type="text"],
    input[type="date"],
    input[type="number"],
    input[type="time"],
    select,
    textarea{
      width:100%;
      padding:10px 11px;
      border-radius:12px;
      border:1px solid var(--border);
      background:var(--card);
      color:var(--text);
      font-size:14px;
      outline:none;
      transition:.16s border-color,.16s box-shadow,.16s background,.16s transform;
    }
    input::placeholder,
    textarea::placeholder{ color:#6b7280; font-size:13px;}
    input:focus,
    select:focus,
    textarea:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(37,99,235,.35);
      background:var(--card);
      transform:translateY(-1px);
    }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:8px 14px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:13px;
      font-weight:600;
      letter-spacing:.01em;
      background:#111827;
      color:#e5e7eb;
      border:1px solid #1f2937;
      transition:.15s background,.15s transform,.15s box-shadow,.15s border-color,.15s opacity;
    }
    .btn-primary{
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      border-color:transparent;
      color:#fff;
      box-shadow:0 10px 18px rgba(37,99,235,.45);
    }
    .btn-primary:hover{
      transform:translateY(-1px);
      box-shadow:0 14px 26px rgba(37,99,235,.6);
      opacity:0.97;
    }
    .btn-outline{
      background:transparent;
      color:var(--text2);
      border-color:#1f2937;
    }
    [data-theme="light"] .btn-outline{
      border-color:#e5e7eb;
    }
    .btn-outline:hover{ background:rgba(255,255,255,.06); }

    .hint{ color:var(--text2); font-size:13px; margin-top:-4px; }
    .small{ color:var(--text2); font-size:12px; }

    .row{ display:flex; gap:8px; align-items:center; }
    .pill{ display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); font-size:12px; color:var(--text2); }

    .switch{ position:relative; display:inline-block; width:44px; height:24px; }
    .switch input{ opacity:0; width:0; height:0; }
    .slider{ position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background:#1f2937; transition:.2s; border-radius:24px; border:1px solid var(--border); }
    .slider:before{ position:absolute; content:""; height:18px; width:18px; left:3px; bottom:2.5px; background:white; transition:.2s; border-radius:50%; }
    input:checked + .slider{ background:#2563eb; }
    input:checked + .slider:before{ transform:translateX(18px); }
  </style>
</head>
<body>
  <div class="container">
    <nav class="top-nav" aria-label="Navigation principale">
      <div class="row" style="gap:10px;">
        <span class="nav-brand">SZD Studio</span>
        <span class="pill">Suite créative</span>
      </div>
      <div class="nav-links">
        <a class="nav-link" href="index.html">Prestations</a>
        <a class="nav-link" href="facturation.html">Facturation</a>
        <a class="nav-link active" href="rdv.html">Ajouter un RDV</a>
        <a class="nav-link" href="licence.html">Contrat instrumentale</a>
        <a class="nav-link" href="reverb.html">Outils reverb vintage</a>
      </div>
    </nav>
    <header class="app">
      <div class="logo-wrap">
        <img
          src="szd_logo_white.png"
          data-dark-src="szd_logo_white.png"
          data-light-src="szd_logo_black.png"
          alt="SZD Studio">
      </div>

      <div>
        <h1>Ajouter un RDV (Google Calendar)</h1>
        <div class="row" style="margin:4px 0 2px;">
          <span class="pill">Version 1.0</span>
          <span class="pill">Création rapide</span>
        </div>
        <p class="sub">
          Remplis le formulaire pour générer instantanément un lien Google Calendar et créer ton événement en un clic.
        </p>
      </div>

      <label class="switch" style="margin-left:auto;">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
    </header>

    <section class="card" id="bloc-calendar" style="max-width: 900px; margin: 0 auto 24px;">
      <h2>Ajouter un RDV (Google Calendar)</h2>
      <p class="hint">Remplis les champs puis clique sur “Créer dans Google Calendar”.</p>

      <div class="grid grid-2">
        <div>
          <label for="gc-title">Titre</label>
          <input id="gc-title" type="text" placeholder="Titre de l’événement" />
        </div>
        <div>
          <label for="gc-location">Lieu</label>
          <input id="gc-location" type="text" placeholder="Lieu" />
        </div>

        <div>
          <label for="gc-date">Date</label>
          <input id="gc-date" type="date" />
        </div>
        <div>
          <label for="gc-allday">Toute la journée ?</label>
          <input id="gc-allday" type="checkbox" />
        </div>

        <div>
          <label for="gc-start">Heure de début</label>
          <input id="gc-start" type="time" />
        </div>
        <div>
          <label for="gc-end">Heure de fin</label>
          <input id="gc-end" type="time" />
        </div>

        <div style="grid-column:1 / -1;">
          <label for="gc-desc">Description</label>
          <textarea id="gc-desc" placeholder="Détails (ex : Tournage clip, durée, particularités...)"></textarea>
        </div>
      </div>

      <div class="toolbar">
        <button class="btn btn-primary" id="gc-create" type="button">Créer dans Google Calendar</button>
        <a id="gc-url" href="#" target="_blank" class="btn btn-outline">Ouvrir le lien</a>
      </div>
      <p class="small">Le lien ouvre Google Calendar avec l'événement pré-rempli (dans un nouvel onglet).</p>
    </section>
  </div>

  <script>
    function updateThemeLogos(theme){
      const mode = theme === "light" ? "light" : "dark";

      document.querySelectorAll('[data-light-src][data-dark-src]').forEach((img) => {
        const target = mode === "light" ? img.dataset.lightSrc : img.dataset.darkSrc;
        if (target) {
          img.setAttribute("src", target);
        }
      });
    }
  </script>

  <script>
  (function(){
    function pad(n){ return String(n).padStart(2,'0'); }
    function yyyymmdd(dateStr){
      if(!dateStr) return "";
      var parts = dateStr.split("-");
      if(parts.length !== 3) return "";
      var Y = parts[0], M = parts[1], D = parts[2];
      return Y + M + D;
    }
    function hhmmss(timeStr){
      if(!timeStr) return "000000";
      var parts = String(timeStr).split(":");
      var h = parts[0] || "00";
      var m = parts[1] || "00";
      return pad(h) + pad(m) + "00";
    }
    function buildUrl(){
      var title = document.getElementById("gc-title").value || "RDV";
      var desc  = document.getElementById("gc-desc").value  || "";
      var loc   = document.getElementById("gc-location").value || "";
      var date  = document.getElementById("gc-date").value;
      var start = document.getElementById("gc-start").value;
      var end   = document.getElementById("gc-end").value;
      var allDay= document.getElementById("gc-allday").checked;

      if(!date) return "";

      var d = yyyymmdd(date);
      var datesParam = "";
      if(allDay){
        datesParam = d + "/" + d;
      }else{
        var hs = hhmmss(start || "09:00");
        var he = hhmmss(end   || "10:00");
        datesParam = d + "T" + hs + "/" + d + "T" + he;
      }

      var params = new URLSearchParams();
      params.set("action","TEMPLATE");
      params.set("text", title);
      if(desc) params.set("details", desc);
      if(loc) params.set("location", loc);
      params.set("dates", datesParam);

      return "https://www.google.com/calendar/render?" + params.toString();
    }

    document.addEventListener("DOMContentLoaded", function(){
      var preview = document.getElementById("gc-url");
      var create  = document.getElementById("gc-create");
      if(!preview || !create) return;

      function refresh(){
        var url = buildUrl();
        if(url){
          preview.href = url;
          preview.textContent = "Ouvrir le lien Google Calendar";
        }else{
          preview.href = "#";
          preview.textContent = "Renseigne au moins la date";
        }
      }

      ["gc-title","gc-desc","gc-location","gc-date","gc-start","gc-end","gc-allday"].forEach(function(id){
        var el = document.getElementById(id);
        if(el){
          el.addEventListener("input", refresh);
          el.addEventListener("change", refresh);
        }
      });
      refresh();

      create.addEventListener("click", function(){
        var url = buildUrl();
        if(url){
          window.open(url, "_blank", "noopener");
        }else{
          alert("Renseigne au moins la date pour créer l'événement.");
        }
      });
    });
  })();
  </script>

  <script>
    (function(){
      const THEME_KEY = "szd_theme";
      const root = document.documentElement;

      function applyTheme(theme){
        if(theme === "light"){
          root.setAttribute("data-theme","light");
        }else{
          root.removeAttribute("data-theme");
        }

        if (typeof updateThemeLogos === "function") {
          updateThemeLogos(theme);
        }
      }

      document.addEventListener("DOMContentLoaded", function(){
        var toggle = document.getElementById("themeToggle");
        if(!toggle) return;

        var saved = null;
        try {
          saved = localStorage.getItem(THEME_KEY);
        } catch(e) {}

        if(saved === "light"){
          applyTheme("light");
          toggle.checked = false;
        } else {
          applyTheme("dark");
          toggle.checked = true;
        }

        toggle.addEventListener("change", function(){
          if(toggle.checked){
            applyTheme("dark");
            try { localStorage.setItem(THEME_KEY,"dark"); } catch(e) {}
          } else {
            applyTheme("light");
            try { localStorage.setItem(THEME_KEY,"light"); } catch(e) {}
          }
        });
      });
    })();
  </script>
</body>
</html>
